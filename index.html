<!DOCTYPE html>
<html>
    <head>
        <title>About</title>
        
        <meta name="author" content="Benjamin Ray" />
        <meta name="date" content="Summer 2019" />
				<meta name="robots" content="noindex">
        <meta charset="utf-8">

				<style>
					body{
						margin-top: 50px;
						margin-bottom: 50px;
						margin-left: 100px;
						margin-right: 100px;
					}
					
					h4{
						border-bottom: 1px solid black;
					}
					
					h5{
						border-bottom: 1px dashed black;
					}
					
					#indent{
						margin-left: 50px;
					}
				</style>
    </head>
    <body>
			<h4>Description</h4>
			
				<p>&emsp;This is a brief summary of a project undertaken during the Summer of 2019. The goal of the project was to build a time of flight sensor for a BMX bicycle. This project also gave me an excuse to use the Arduino platform for the first time and to further my knowledge of the C programming language which is used on the Arduino platform.</p>
			
			<h4>Origin and Design</h4>
			
				<p>&emsp;The idea for this project came about after a discussion with a BMX enthusiast I worked with over the Summer when he jokingly asked me to put a “jump meter” on his bike. After doing some initial research it came to my attention that there was no currently offered product that was a solution to this problem. So, with this lack of current options I set out to build some type of "jump sensor" that could be useful to BMX riders. My goal for the Summer was to build one type of sensor or way of gathering data that could later be built upon in the future.</p>
				
				<p>&emsp;My first thought was to measure the maximum height obtained during a jump preformed by a BMX bike, however this was a difficult prospect that will have to be explored at a later time. My next thought was to measure the time of flight of the bicycle during a jump. This measurement could be used by the rider to assist with training and practice as well as be a fun way to challenge fellow riders to outperform the current highest time of flight reading.</p>
				
				<p>&emsp;Multiple methods to perform this time of flight calculation were considered ranging from reading tire pressure differential via wireless tire pressure sensors to using some kind of squat switch system similar to the type I had seen used in aviation landing gear systems. The method I finally decided upon was to use an ultrasonic range sensor that would trigger a timer when the bicycle was airborne.</p>
				
				<p>&emsp;After doing some initial research on the available electronics prototyping boards available, I settled on using an Arduino Uno and its associated accessories. After ordering the kit, building a few simple projects, and working with the Arduino IDE I felt comfortable enough to get on to developing the first prototype.</p>
			
			<h4>Development</h4>
			
				<div id="indent">
				
					<h5>Prototype 1</h5>
					
						<p>&emsp;The first prototype I developed and tested used an ultrasonic range sensor affixed the front right fork leg of the bicycle, with the electronic components housed in two seperate plastic project enclosures. The first enclosure housed an LCD screen that would be attached  to the handlebars of the bicycle. A secondary enclosure was used to house the battery, Arduino board, and ultrasonic sensor that would attach to the fork leg. </p>
						
						<p>&emsp;The first problem I faced in this prototype was that the initial Arduino Uno board was too large to fit in any of the enclosures I would be using. This was remedied by switching to the Arduino Nano which has a much smaller footprint.</p>
						
						<p>&emsp;A wiring harness connected the two units that could be routed up the fork and to the head unit on the handlebars. Small notches were filed into the enclosures so that they could be attached to the bicycle with plastic ties. A picture of the system installed on a bicycle is included below.</p>
						
						<!--Picture-->
						<img src="pic1.jpg" style="transform:rotate(90deg); padding-top: 150px;" alt="prototype 1" width="500" height="333">
						
						<p>&emsp;After the system was built and installed on a bicycle, testing was preformed to determine if the system would work as intended. This testing revealed that the sensor worked as expected except when the wheel was turned approximately 20 degrees to the left. During a turn at this angle or greater the sensor would trigger even though the bike was not airborne. The main issue being that the turn, coupled with the angle of the bike during the turn, exceeded the 15 degree effectual angle provided by the ultrasonic sensor.</p>

					<h5>Prototype 2</h5>
					
						<p>&emsp;A second prototype was built in response to the partial failure of the first prototype. I wanted to not only remedy the issue of the sensor tripping inadvertently but also make several changes to the overall design to make it easier to mount on the bicycle in the future.</p>
						
						<p>&emsp;The first thing I wanted to change was how I was housing the electronics. With the first prototype I had the LCD screen in one enclosure connected to the second enclosure with the Arduino via a wiring bundle of 10 wires. I wanted to instead have all of the electronics except the ultrasonic sensor in one enclosure. This would allow a wiring bundle of 4 wires going directly to the ultrasonic sensor rather than the 10 wires used previously. I accomplished this by attaching another project enclosure to the previously built LCD enclosure (See the picture below for reference).</p>
						
						<!--Picture-->
						<img src="pic2.jpg" style="transform:rotate(90deg); padding-top: 150px;" alt="prototype 2" width="500" height="330">
						<p>&emsp;This new double enclosure would be mounted on the top-tube of the bicycle instead of on the handlebars as done in the first prototype. This allowed full range of motion of the handlebars, and subsequently the steering, that was previously limited by the wiring bundle between the two enclosures.</p>
						
						<p>&emsp;To solve the issue of the sensor inadvertently tripping I decided to mount the sensor in-line with the center axis of the bicycle on the down-tube. This was accomplished by creating an aluminum frame in which the ultrasonic sensor would sit.(See picture above for reference) This frame would be attached to the bike via an adjustable, ball-bearing, pivot point. The thought process behind this was to allow the sensor to always align itself with the ground no matter what the angle of the bicycle was. Ultra-flexible wiring was used so as to limit the resistance caused by the insulation of the original wiring on the pivot point (See the video below for reference).</p>
						
						<!--Video-->
						<video width="400" controls>
							<source src="vid1.mp4" type="video/mp4">
							Your browser does not support HTML5 video.
						</video>
						
						<p>&emsp;After this second prototype was built it was again installed on a bicycle and tested. (See picture below for reference) The sensor preformed better than the first prototype but still suffered some problems. The ability of the sensor to pivot towards the ground based on gravity worked at slow speeds, but at higher speeds instability caused by the rider pedaling the bicycle caused an oscillation that would trigger the sensor without the bike being airborne. The sensor was then locked in a fixed position and tested again. This locked pivot test preformed exceptionally well with no inadvertent triggering of the sensor. Testing showed that the 15 degree effectual angle of the sensor was more than enough to counteract any angle caused by steering.</p>
						
						<!--Picture-->
						<img src="pic3.jpg" style="padding-left: 15px;" alt="prototype 2" width="500" height="330">
						
					<h5>Prototype 3</h5>
					
						<p>&emsp;The third prototype of the sensor was built to simplify the unneeded mount and pivot system of the second prototype. A new mount was made using another plastic enclosure that was cut at an angle that would complement the angle of the down-tube of the bicycle in order to have the ultrasonic sensor point straight down at 90 degrees. The angle of the down-tube of the bicycle was measured using a homemade inclinometer at 33 degrees. </p>
						
						
						<p>&emsp;With this angle measurement, the plastic enclosure was cut, and the ultrasonic sensor installed (See picture below for reference).</p>
						
						<!--Picture-->
						<img src="pic4.jpg" style="padding-left: 5px;" alt="prototype 3" width="500" height="330">
						
						<p>&emsp;This third prototype was then installed on the bicycle for testing. (See picture below for reference) The sensor preformed well, with no adverse effects noted during the test run. The sensor's 15 degree effectual angle was enough to prevent the premature triggering of the sensor during normal riding conditions. The sensor and display were also robust enought to handle the highest jump the rider could manage at our test location.</p>
						
						<!--Picture-->
						<img src="pic5.jpg" style="transform:rotate(90deg); padding-top: 170px;" alt="prototype 3" width="515" height="333">
						
				</div>
			
			<h4>Code</h4>
			
				<p>&emsp;The code used across all three prototypes was the same, the only change being made in these different versions was the hardware. Because of this I kept this section separate so as not to repeat the same information.</p>
				
				<p>&emsp;The code written for this project is relatively simple to understand. The program has two loops, one in the setup function and one in the main function. The loop in the setup function sends a ping out of the ultrasonic sensor. If the distance of this ping is within 4 ft; the distance, plus a 3 inch buffer, is recorded as the distance to the ground. If the distance is over 4 ft the loop repeats. A red indicator light and screen prompt lets the rider know the distance is not set yet, and a blinking green indicator light and screen prompt lets the rider know the distance was set successfully.</p>
				
				<p>&emsp;Once the setup function is exited the main function takes over. This main function loops over and over constantly sending a ping out of the ultrasonic sensor and determining if the distance to the ground has increased. If it has,  a green indicator light turns on and a timer starts and runs until this distance returns to its original length, when this happens the time of flight is displayed until the next jump and a red indicator light turns on. If the distance has not increased the function simply loops and check again.</p>
				
    </body>
</html>